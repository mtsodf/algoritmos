\documentclass[aspectratio=169,usenames,dvipsnames]{beamer}


\usetheme{default}  % You can choose any other theme you prefer

\title{10 - Algoritmos}
\subtitle{Caminho Mínimo}
\author{Mateus Oliveira de Figueiredo}
\date{27/11/2023}

\usepackage{tikz}
\usetikzlibrary{matrix}
\usepackage{multicol}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{xcolor}
\usepackage[utf8]{inputenc}
\usepackage[portuguese]{babel}
\usepackage{amsmath} % for "pmatrix" environment  
\usepackage{pgffor} 
\usepackage{listings}

\usepackage{pgfplots}
\DeclareUnicodeCharacter{2212}{−}
\usepgfplotslibrary{groupplots,dateplot}
\usetikzlibrary{patterns,shapes.arrows, positioning, arrows}
\usetikzlibrary{graphs, graphs.standard}
\pgfplotsset{compat=newest}

\lstset{
  language=Python,
  basicstyle=\ttfamily\tiny,
  keywordstyle=\color{blue},
  commentstyle=\color{green},
  stringstyle=\color{red},
  stepnumber=1,
  numbersep=10pt,
  showspaces=false,
  showstringspaces=false,
  tabsize=2,
  breaklines=true,
  breakatwhitespace=true,
}

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\begin{frame}
\frametitle{Caminho Mínimo}

Dado um nó fonte encontrar o menor caminho para todos os outros nós.

\vfill
Algoritmos:
\begin{itemize}
  \item Dijkstra ($O(mlog(m))$)
  \item Bellman-Ford ($O(mn)$)
  \item Bellman-Ford com filas ($O(mn)$)
  \item DAGS ($O(m+n)$)
\end{itemize}
\vfill
\end{frame}


\begin{frame}
\frametitle{Proposição Relaxamento}

\vfill
\begin{block}{Proposição}
Seja G um dígrafo com fonte $s \in V$. Seja dist\_para um vetor de distâncias de s para cada vértice de G. 
Este vetor contém as distâncias mínimas se e somente se:
\begin{itemize}
  \item Para cada aresta $u \rightarrow v$ de G, temos que dist\_para[v] $\leq$ dist\_para[u] + peso(u,v).
  \item dist\_para[s] = 0
\end{itemize}
\end{block}
\vfill

\end{frame}

\begin{frame}{Bellman-Ford}
    Relaxar todas as arestas $|V|$ vezes.

    \vfill

    \onslide<2->{
        \begin{figure}[ht]
        \centering
        \includegraphics[width=0.4\textwidth]{figs/bellman/mediumEWD_0021.pdf}
        \end{figure}
    }

    \vfill
    \onslide<3>{
        \begin{itemize}
            \item Utilizar fila para guardar nós que devem ser relaxados
        \end{itemize}
    }

    \vfill

\end{frame}

\begin{frame}{Algoritmo para DAGs}

    \begin{itemize}
        \item Ordenar os vértices topologicamente
        \item Relaxar os vértices na ordem topológica
    \end{itemize}

    \begin{center}
      \begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=3cm,
                          thick,main node/.style={circle,fill=blue!20,draw,font=\sffamily\Large\bfseries}]

        \node[main node] (1) {2};
        \node[main node] (2) [right of=1] {1};
        \node[main node] (3) [right of=2] {0};
        \node[main node] (4) [right of=3] {3};


        \path[every node/.style={font=\sffamily\small}]
          (1) edge[right] node [right] {} (2)
          (1) edge[bend right] node [right] {} (3)
          (1) edge[bend right] node [right] {} (4)
          (2) edge[right] node [right] {} (3)
          (2) edge[bend right] node [right] {} (4)
          (3) edge[right] node [right] {} (4);
      \end{tikzpicture}

    \end{center}
\end{frame}

\begin{frame}{Dijkstra} 

    A cada passo, relaxar o vértice com atual menor distância ao vértice fonte

    \vfill

    \begin{figure}[ht]
    \centering
    \includegraphics[width=0.4\textwidth]{figs/sedrick_dijkstra.png}
    %Add tiny caption with fig source
    \footnote{Algorithms Fourth Edition: Sedgewick, Wayne}
    \end{figure}

    \vfill
    
\end{frame}

\begin{frame}{Dijkstra - IndexMinPQ}
    \vfill
    \begin{itemize}
        \item Heap que possui operações de alterar prioridade e remover o menor elemento em $O(log(n))$.
        \item Necessário quando aparece um caminho menor que o anterior. 
    \end{itemize}
    \vfill
\end{frame}

\include{dikjstra_example}

\begin{frame}{Dijkstra - IndexMinPQ - Implementação}
    \vfill
    \begin{columns}
    \column{0.65\textwidth}
        \begin{figure}[ht]
            \centering
            \includegraphics[width=0.9\textwidth]{figs/heapq_python.png}
            \footnote{https://docs.python.org/3/library/heapq.html}
        \end{figure}
    \column{0.35\textwidth}
        \begin{figure}[ht]
            \centering
            \includegraphics<2>[width=0.9\textwidth]{figs/indexminpq.png}
        \end{figure}
    \end{columns}
    \vfill
\end{frame}


\begin{frame}{Resultado - Grafo Pequeno}
    \begin{columns}
    \column{0.5\textwidth}
    
    \begin{figure}[ht]
    \centering
    \includegraphics[width=0.9\textwidth]{figs/tinyEWD.pdf}
    \end{figure}

    \column{0.5\textwidth}

    \begin{figure}[ht]
    \centering
    \includegraphics<2>[width=0.9\textwidth]{figs/tinyEWD_dijkstra.pdf}
    \end{figure}
    
    \end{columns}
\end{frame}


\foreach \x in {0021, 0030, 0153, 0249}{
    \begin{frame}{Dijkstra x Bellman }
        \begin{columns}
        \column{0.5\textwidth}
        
        \begin{figure}[ht]
        \centering
        \includegraphics[width=0.9\textwidth]{figs/dijkstra/mediumEWD_\x.pdf}
        \caption{Dijkstra}
        \end{figure}

        \column{0.5\textwidth}

        \begin{figure}[ht]
        \centering
        \includegraphics[width=0.9\textwidth]{figs/bellman/mediumEWD_\x.pdf}
        \caption{Bellman-Ford}
        \end{figure}
        
        \end{columns}
    \end{frame}
}

\begin{frame}{Resultados - Grafo Completo}
    \begin{columns}
    \column{0.5\textwidth}
        \begin{itemize}
            \item m = n(n-1)
            \item Pesos aleatórios no intervalo [0, 1]
        \end{itemize}
    \column{0.5\textwidth}
    \begin{figure}[ht]
        \centering
        \includegraphics<1>[width=0.9\textwidth]{figs/complete_graphs.pdf}
        \includegraphics<2>[width=0.9\textwidth]{figs/complete_graphs_log.pdf}
    \end{figure}
    \end{columns}
\end{frame}


\begin{frame}{Resultados - DAG Completo}
    \begin{columns}
    \column{0.5\textwidth}
        \begin{itemize}
            \item m = n(n-1)/2
            \item Pesos aleatórios no intervalo [0, 1]
        \end{itemize}
    \column{0.5\textwidth}
    \begin{figure}[ht]
        \centering
        \includegraphics<1>[width=0.9\textwidth]{figs/dag_graphs_0.pdf}
        \includegraphics<2>[width=0.9\textwidth]{figs/dag_graphs_1.pdf}
        \includegraphics<3>[width=0.9\textwidth]{figs/dag_graphs_log.pdf}
    \end{figure}

    \end{columns}

\end{frame}

\begin{frame}{Resultados $m=O(n)$}
    \begin{columns}
    \column{0.5\textwidth}
        \begin{itemize}
            \item m = O(n)
            \item Pesos aleatórios no intervalo [0, 1]
        \end{itemize}
    \column{0.5\textwidth}
    \begin{figure}[ht]
        \centering
        \includegraphics<1>[width=0.9\textwidth]{figs/m_linear.pdf}
        \includegraphics<2>[width=0.9\textwidth]{figs/m_linear_log_0.pdf}
        \includegraphics<3>[width=0.9\textwidth]{figs/m_linear_log_1.pdf}
    \end{figure}

    \end{columns}

\end{frame}

\begin{frame}{Sobre Arestas Negativas}
    \vfill
    \begin{itemize}
        \item<1-> O problema fica mal definido quando existem ciclos negativos
        \item<2-> Bellman-Ford funciona com arestas negativas
        \item<3-> Dijkstra não funciona com arestas negativas
            \begin{itemize}
                \item<4> {\color{red} Não consegui encontrar exemplo disso com o IndexMinPQ}
            \end{itemize}
    \end{itemize}
    \vfill
\end{frame}


\include{negative_edge_example}


\begin{frame}{Sobre Arestas Negativas}

    \vfill
    \begin{figure}[ht]
    \centering
        \includegraphics[width=0.5\textwidth]{figs/dijkstra_sedrick.png}
        \footnote{Algorithms Fourth Edition: Sedgewick, Wayne}
    \end{figure}
    \vfill
\end{frame}

% Final frame with Obrigado
\begin{frame}
\frametitle{Fim}
\vfill
\begin{center}
    \Huge{Obrigado!}
\end{center}
\vfill
\end{frame}

\end{document}
